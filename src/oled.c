/*
 * oled.c
 *
 *  Created on: 2019年6月17日
 *      Author: zhanlei
 */
#include "oled.h"
#include "Timer.h"
#include "diag/Trace.h"

#define OLED_I2C_ADDR	0x78u
static I2C_HandleTypeDef hi2c2;
static const uint8_t oled_init_code[] = {
	0x80, 0xAE, // display off
	0x80, 0x20,	// Set Memory Addressing Mode
	0x80, 0x10,	// 00,Horizontal Addressing Mode;01,Vertical Addressing Mode;10,Page Addressing Mode (RESET);11,Invalid
	0x80, 0xb0,	// Set Page Start Address for Page Addressing Mode,0-7
	0x80, 0xc8,	// Set COM Output Scan Direction
	0x80, 0x00, // ---set low column address
	0x80, 0x10, // ---set high column address
	0x80, 0x40, // --set start line address
	0x80, 0x81, // --set contrast control register
	0x80, 0xff, //  brightness 0x00~0xff
	0x80, 0xa1, // --set segment re-map 0 to 127
	0x80, 0xa6, // --set normal display
	0x80, 0xa8, // --set multiplex ratio(1 to 64)
	0x80, 0x3F, //
	0x80, 0xa4, // 0xa4,Output follows RAM content;0xa5,Output ignores RAM content
	0x80, 0xd3, // -set display offset
	0x80, 0x00, // -not offset
	0x80, 0xd5, // --set display clock divide ratio/oscillator frequency
	0x80, 0xf0, // --set divide ratio
	0x80, 0xd9, // --set pre-charge period
	0x80, 0x22, //
	0x80, 0xda, // --set com pins hardware configuration
	0x80, 0x12,
	0x80, 0xdb, // --set vcomh
	0x80, 0x20, // 0x20,0.77xVcc
	0x80, 0x8d, // --set DC-DC enable
	0x80, 0x14, //
	0x00, 0xaf, // --turn on oled panel
};

static int i2c_init(void) {
	hi2c2.Instance = I2C2;
	hi2c2.Init.ClockSpeed = 400000;
	hi2c2.Init.DutyCycle = I2C_DUTYCYCLE_2;
	hi2c2.Init.OwnAddress1 = 0;
	hi2c2.Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
	hi2c2.Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
	hi2c2.Init.OwnAddress2 = 0;
	hi2c2.Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
	hi2c2.Init.NoStretchMode = I2C_NOSTRETCH_DISABLE;
	if (HAL_I2C_Init(&hi2c2) != HAL_OK) {
		return -1;
	}
	return 0;
}

int oled_clear(uint8_t mode) {
	HAL_StatusTypeDef status = HAL_OK;
	for (int page = 0; page < 8; page++) {
		uint8_t head[] = {
			0x80, 0xb0 | page, 0x80, 0x02, 0x00, 0x10
		};
		uint8_t data[] = {
			0x40, mode? 0xff : 0
		};
		status = HAL_I2C_Master_Transmit(
				&hi2c2,
				(uint16_t) OLED_I2C_ADDR,
				(uint8_t*) head,
				sizeof(head),
				10000);

		/* Check the communication status */
		if (status != HAL_OK) {
			/* Execute user timeout callback */
			return -1;
		}
		for (int column = 0; column < 128; column++) {
			status = HAL_I2C_Master_Transmit(
					&hi2c2,
					(uint16_t) OLED_I2C_ADDR,
					(uint8_t*) data,
					sizeof(data),
					10000);
			/* Check the communication status */
			if (status != HAL_OK) {
				/* Execute user timeout callback */
				return -1;
			}
		}
	}
	return 0;
}

static const uint8_t ascii_6x8[][6];
int oled_s_putc(uint8_t column, uint8_t row, uint8_t mode, char ch) {
	if ((ch >= ' ') && (ch <= '~') && (column < 128) && (row < 8)) {
		HAL_StatusTypeDef status = HAL_OK;
		const uint8_t *code;
		uint8_t t_column = column + 2; // position offset
		uint8_t head[] = {
			0x80, 0xb0 | row, 0x80, 0x00 | (t_column & 0x0f), 0x00, 0x10 | ((t_column & 0xf0) >> 4)
		};
		status = HAL_I2C_Master_Transmit(
				&hi2c2,
				(uint16_t) OLED_I2C_ADDR,
				(uint8_t*) head,
				sizeof(head),
				10000);

		/* Check the communication status */
		if (status != HAL_OK) {
			/* Execute user timeout callback */
			return -1;
		}

		code = ascii_6x8[ch - ' '];
		for (int i = 0; (i < 6) && (column < 128); i++) {
			uint8_t data[] = {
				0x40, mode? ~code[i] : code[i]
			};
			status = HAL_I2C_Master_Transmit(
					&hi2c2,
					(uint16_t) OLED_I2C_ADDR,
					(uint8_t*) data,
					sizeof(data),
					10000);
			/* Check the communication status */
			if (status != HAL_OK) {
				/* Execute user timeout callback */
				return -1;
			}
			column++;
		}
	}
	return 0;
}

static const uint8_t ascii_8x16[][16];
int oled_m_putc(uint8_t column, uint8_t row, char ch) {
	return 0;
}

static const uint8_t ascii_12x24[][36];
int oled_l_putc(uint8_t column, uint8_t row, char ch) {
	return 0;
}

int oled_puts(uint8_t column, uint8_t row, uint8_t mode, uint8_t type, const char *str) {

}

int oled_init(void) {
	HAL_StatusTypeDef status = HAL_OK;
	int ret = i2c_init();
	if (ret == 0) {
		timer_sleep(100);
		status = HAL_I2C_Master_Transmit(
				&hi2c2,
				(uint16_t) OLED_I2C_ADDR,
				(uint8_t*) oled_init_code,
				sizeof(oled_init_code),
				10000);

		/* Check the communication status */
		if (status != HAL_OK) {
			/* Execute user timeout callback */
			ret = -1;
		}
	}

	oled_clear(0);
	int i = 0;
	for (char ch = ' '; ch <= '~'; ch++) {
		oled_s_putc((i % 16) * 7, i / 16, 0, ch);
		i++;
	}
	return ret;
}

/*
 * Mode
 * ---
 * L
 * ^
 * |
 * |
 * |
 * H
 *
 */
static const uint8_t ascii_6x8[][6] =
{
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* ' ' 0 */
	{0x00, 0x00, 0x00, 0x2F, 0x00, 0x00}, /* '!' 1 */
	{0x00, 0x00, 0x07, 0x00, 0x07, 0x00}, /* '"' 2 */
	{0x00, 0x14, 0x7F, 0x14, 0x7F, 0x14}, /* '#' 3 */
	{0x00, 0x24, 0x2A, 0x7F, 0x2A, 0x12}, /* '$' 4 */
	{0x00, 0x62, 0x64, 0x08, 0x13, 0x23}, /* '%' 5 */
	{0x00, 0x36, 0x49, 0x55, 0x22, 0x50}, /* '&' 6 */
	{0x00, 0x00, 0x05, 0x03, 0x00, 0x00}, /* ''' 7 */
	{0x00, 0x00, 0x1C, 0x22, 0x41, 0x00}, /* '(' 8 */
	{0x00, 0x00, 0x41, 0x22, 0x1C, 0x00}, /* ')' 9 */
	{0x00, 0x14, 0x08, 0x3E, 0x08, 0x14}, /* '*' 10 */
	{0x00, 0x08, 0x08, 0x3E, 0x08, 0x08}, /* '+' 11 */
	{0x00, 0x00, 0x00, 0xA0, 0x60, 0x00}, /* ',' 12 */
	{0x00, 0x08, 0x08, 0x08, 0x08, 0x08}, /* '-' 13 */
	{0x00, 0x00, 0x60, 0x60, 0x00, 0x00}, /* '.' 14 */
	{0x00, 0x20, 0x10, 0x08, 0x04, 0x02}, /* '/' 15 */
	{0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E}, /* '0' 16 */
	{0x00, 0x00, 0x42, 0x7F, 0x40, 0x00}, /* '1' 17 */
	{0x00, 0x42, 0x61, 0x51, 0x49, 0x46}, /* '2' 18 */
	{0x00, 0x21, 0x41, 0x45, 0x4B, 0x31}, /* '3' 19 */
	{0x00, 0x18, 0x14, 0x12, 0x7F, 0x10}, /* '4' 20 */
	{0x00, 0x27, 0x45, 0x45, 0x45, 0x39}, /* '5' 21 */
	{0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30}, /* '6' 22 */
	{0x00, 0x01, 0x71, 0x09, 0x05, 0x03}, /* '7' 23 */
	{0x00, 0x36, 0x49, 0x49, 0x49, 0x36}, /* '8' 24 */
	{0x00, 0x06, 0x49, 0x49, 0x29, 0x1E}, /* '9' 25 */
	{0x00, 0x00, 0x36, 0x36, 0x00, 0x00}, /* ':' 26 */
	{0x00, 0x00, 0x56, 0x36, 0x00, 0x00}, /* ';' 27 */
	{0x00, 0x08, 0x14, 0x22, 0x41, 0x00}, /* '<' 28 */
	{0x00, 0x14, 0x14, 0x14, 0x14, 0x14}, /* '=' 29 */
	{0x00, 0x00, 0x41, 0x22, 0x14, 0x08}, /* '>' 30 */
	{0x00, 0x02, 0x01, 0x51, 0x09, 0x06}, /* '?' 31 */
	{0x00, 0x32, 0x49, 0x59, 0x51, 0x3E}, /* '@' 32 */
	{0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C}, /* 'A' 33 */
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x36}, /* 'B' 34 */
	{0x00, 0x3E, 0x41, 0x41, 0x41, 0x22}, /* 'C' 35 */
	{0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C}, /* 'D' 36 */
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x41}, /* 'E' 37 */
	{0x00, 0x7F, 0x09, 0x09, 0x09, 0x01}, /* 'F' 38 */
	{0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A}, /* 'G' 39 */
	{0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F}, /* 'H' 40 */
	{0x00, 0x00, 0x41, 0x7F, 0x41, 0x00}, /* 'I' 41 */
	{0x00, 0x20, 0x40, 0x41, 0x3F, 0x01}, /* 'J' 42 */
	{0x00, 0x7F, 0x08, 0x14, 0x22, 0x41}, /* 'K' 43 */
	{0x00, 0x7F, 0x40, 0x40, 0x40, 0x40}, /* 'L' 44 */
	{0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F}, /* 'M' 45 */
	{0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F}, /* 'N' 46 */
	{0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E}, /* 'O' 47 */
	{0x00, 0x7F, 0x09, 0x09, 0x09, 0x06}, /* 'P' 48 */
	{0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E}, /* 'Q' 49 */
	{0x00, 0x7F, 0x09, 0x19, 0x29, 0x46}, /* 'R' 50 */
	{0x00, 0x46, 0x49, 0x49, 0x49, 0x31}, /* 'S' 51 */
	{0x00, 0x01, 0x01, 0x7F, 0x01, 0x01}, /* 'T' 52 */
	{0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F}, /* 'U' 53 */
	{0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F}, /* 'V' 54 */
	{0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F}, /* 'W' 55 */
	{0x00, 0x63, 0x14, 0x08, 0x14, 0x63}, /* 'X' 56 */
	{0x00, 0x07, 0x08, 0x70, 0x08, 0x07}, /* 'Y' 57 */
	{0x00, 0x61, 0x51, 0x49, 0x45, 0x43}, /* 'Z' 58 */
	{0x00, 0x00, 0x7F, 0x41, 0x41, 0x00}, /* '[' 59 */
	{0x00, 0x04, 0x08, 0x10, 0x20, 0x40}, /* '\' 60 */
	{0x00, 0x00, 0x41, 0x41, 0x7F, 0x00}, /* ']' 61 */
	{0x00, 0x04, 0x02, 0x01, 0x02, 0x04}, /* '^' 62 */
	{0x00, 0x40, 0x40, 0x40, 0x40, 0x40}, /* '_' 63 */
	{0x00, 0x00, 0x01, 0x02, 0x04, 0x00}, /* '`' 64 */
	{0x00, 0x20, 0x54, 0x54, 0x54, 0x78}, /* 'a' 65 */
	{0x00, 0x7F, 0x48, 0x44, 0x44, 0x38}, /* 'b' 66 */
	{0x00, 0x38, 0x44, 0x44, 0x44, 0x20}, /* 'c' 67 */
	{0x00, 0x38, 0x44, 0x44, 0x48, 0x7F}, /* 'd' 68 */
	{0x00, 0x38, 0x54, 0x54, 0x54, 0x18}, /* 'e' 69 */
	{0x00, 0x08, 0x7E, 0x09, 0x01, 0x02}, /* 'f' 70 */
	{0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C}, /* 'g' 71 */
	{0x00, 0x7F, 0x08, 0x04, 0x04, 0x78}, /* 'h' 72 */
	{0x00, 0x00, 0x44, 0x7D, 0x40, 0x00}, /* 'i' 73 */
	{0x00, 0x40, 0x80, 0x84, 0x7D, 0x00}, /* 'j' 74 */
	{0x00, 0x7F, 0x10, 0x28, 0x44, 0x00}, /* 'k' 75 */
	{0x00, 0x00, 0x41, 0x7F, 0x40, 0x00}, /* 'l' 76 */
	{0x00, 0x7C, 0x04, 0x18, 0x04, 0x78}, /* 'm' 77 */
	{0x00, 0x7C, 0x08, 0x04, 0x04, 0x78}, /* 'n' 78 */
	{0x00, 0x38, 0x44, 0x44, 0x44, 0x38}, /* 'o' 79 */
	{0x00, 0xFC, 0x24, 0x24, 0x24, 0x18}, /* 'p' 80 */
	{0x00, 0x18, 0x24, 0x24, 0x18, 0xFC}, /* 'q' 81 */
	{0x00, 0x7C, 0x08, 0x04, 0x04, 0x08}, /* 'r' 82 */
	{0x00, 0x48, 0x54, 0x54, 0x54, 0x20}, /* 's' 83 */
	{0x00, 0x04, 0x3F, 0x44, 0x40, 0x20}, /* 't' 84 */
	{0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C}, /* 'u' 85 */
	{0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C}, /* 'v' 86 */
	{0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C}, /* 'w' 87 */
	{0x00, 0x44, 0x28, 0x10, 0x28, 0x44}, /* 'x' 88 */
	{0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C}, /* 'y' 89 */
	{0x00, 0x44, 0x64, 0x54, 0x4C, 0x44}, /* 'z' 90 */
	{0x00, 0x08, 0x36, 0x41, 0x00, 0x00}, /* '{' 91 */
	{0x00, 0x00, 0x00, 0x7F, 0x00, 0x00}, /* '|' 92 */
	{0x00, 0x00, 0x00, 0x41, 0x36, 0x08}, /* '}' 93 */
	{0x00, 0x08, 0x04, 0x08, 0x10, 0x08}, /* '~' 94 */
};

static const uint8_t ascii_8x16[][16] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* ' ' 0 */
	{0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x00, 0x00, 0x00}, /* '!' 1 */
	{0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '"' 2 */
	{0x00, 0x20, 0xE0, 0x3C, 0x20, 0xE0, 0x3C, 0x20, 0x08, 0x78, 0x0F, 0x08, 0x78, 0x0F, 0x08, 0x00}, /* '#' 3 */
	{0x00, 0x38, 0x44, 0x84, 0xFE, 0x04, 0x04, 0x18, 0x00, 0x18, 0x20, 0x20, 0x7F, 0x21, 0x22, 0x1C}, /* '$' 4 */
	{0x00, 0x38, 0x44, 0x44, 0xB8, 0x60, 0x10, 0x0C, 0x00, 0x18, 0x04, 0x03, 0x1C, 0x22, 0x22, 0x1C}, /* '%' 5 */
	{0x00, 0x00, 0x38, 0xC4, 0xC4, 0x38, 0x00, 0x80, 0x00, 0x1E, 0x21, 0x20, 0x20, 0x13, 0x0C, 0x33}, /* '&' 6 */
	{0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* ''' 7 */
	{0x00, 0x00, 0xE0, 0x18, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x07, 0x18, 0x20, 0x40, 0x00, 0x00}, /* '(' 8 */
	{0x00, 0x00, 0x02, 0x04, 0x18, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x18, 0x07, 0x00, 0x00}, /* ')' 9 */
	{0x00, 0x40, 0x80, 0xE0, 0x80, 0x40, 0x00, 0x00, 0x00, 0x02, 0x01, 0x00, 0x01, 0x02, 0x00, 0x00}, /* '*' 10 */
	{0x00, 0x80, 0x80, 0x80, 0xF0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00}, /* '+' 11 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x30, 0x00, 0x00, 0x00}, /* ',' 12 */
	{0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '-' 13 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00}, /* '.' 14 */
	{0x00, 0x00, 0x00, 0x00, 0xC0, 0x30, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x03, 0x00, 0x00, 0x00, 0x00}, /* '/' 15 */
	{0x00, 0xF0, 0x08, 0x04, 0x84, 0x44, 0x28, 0xF0, 0x00, 0x0F, 0x14, 0x22, 0x21, 0x20, 0x10, 0x0F}, /* '0' 16 */
	{0x00, 0x00, 0x08, 0x08, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* '1' 17 */
	{0x00, 0x18, 0x04, 0x04, 0x04, 0x84, 0x78, 0x00, 0x00, 0x38, 0x24, 0x22, 0x21, 0x20, 0x20, 0x00}, /* '2' 18 */
	{0x00, 0x18, 0x84, 0x84, 0x84, 0x84, 0x78, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, /* '3' 19 */
	{0x00, 0x00, 0x00, 0xC0, 0x30, 0x0C, 0xFC, 0x00, 0x00, 0x04, 0x07, 0x04, 0x04, 0x04, 0x3F, 0x04}, /* '4' 20 */
	{0x00, 0xFC, 0x44, 0x44, 0x44, 0x44, 0x84, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, /* '5' 21 */
	{0x00, 0xF8, 0x84, 0x84, 0x84, 0x84, 0x18, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, /* '6' 22 */
	{0x00, 0x04, 0x04, 0x04, 0xC4, 0x34, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x01, 0x00, 0x00, 0x00}, /* '7' 23 */
	{0x00, 0x78, 0x84, 0x84, 0x84, 0x84, 0x78, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, /* '8' 24 */
	{0x00, 0xF8, 0x04, 0x04, 0x04, 0x04, 0xF8, 0x00, 0x00, 0x18, 0x21, 0x21, 0x21, 0x21, 0x1F, 0x00}, /* '9' 25 */
	{0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x00}, /* ':' 26 */
	{0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x1C, 0x00, 0x00, 0x00}, /* ';' 27 */
	{0x80, 0x40, 0x40, 0x20, 0x10, 0x10, 0x08, 0x00, 0x00, 0x01, 0x01, 0x02, 0x04, 0x04, 0x08, 0x00}, /* '<' 28 */
	{0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02}, /* '=' 29 */
	{0x00, 0x08, 0x10, 0x10, 0x20, 0x40, 0x40, 0x80, 0x00, 0x08, 0x04, 0x04, 0x02, 0x01, 0x01, 0x00}, /* '>' 30 */
	{0x00, 0x30, 0x08, 0x04, 0x04, 0x84, 0x48, 0x30, 0x00, 0x00, 0x00, 0x00, 0x37, 0x00, 0x00, 0x00}, /* '?' 31 */
	{0x00, 0xF0, 0x08, 0xC4, 0x24, 0xE4, 0x08, 0xF0, 0x00, 0x0F, 0x10, 0x23, 0x24, 0x23, 0x24, 0x17}, /* '@' 32 */
	{0x00, 0x00, 0x00, 0xE0, 0x1C, 0xE0, 0x00, 0x00, 0x00, 0x38, 0x07, 0x04, 0x04, 0x04, 0x07, 0x38}, /* 'A' 33 */
	{0x00, 0xFC, 0x84, 0x84, 0x84, 0x84, 0x48, 0x30, 0x00, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x11, 0x0E}, /* 'B' 34 */
	{0x00, 0xF0, 0x08, 0x04, 0x04, 0x04, 0x08, 0x30, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0C}, /* 'C' 35 */
	{0x00, 0xFC, 0x04, 0x04, 0x04, 0x04, 0x18, 0xE0, 0x00, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x18, 0x07}, /* 'D' 36 */
	{0x00, 0xFC, 0x84, 0x84, 0x84, 0x84, 0x84, 0x04, 0x00, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20}, /* 'E' 37 */
	{0x00, 0xFC, 0x84, 0x84, 0x84, 0x84, 0x84, 0x04, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* 'F' 38 */
	{0x00, 0xF0, 0x08, 0x04, 0x04, 0x04, 0x08, 0x10, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x21, 0x11, 0x3F}, /* 'G' 39 */
	{0x00, 0xFC, 0x80, 0x80, 0x80, 0x80, 0x80, 0xFC, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F}, /* 'H' 40 */
	{0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* 'I' 41 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x1F, 0x00, 0x00}, /* 'J' 42 */
	{0x00, 0xFC, 0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x00, 0x3F, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20}, /* 'K' 43 */
	{0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00}, /* 'L' 44 */
	{0x00, 0xFC, 0x30, 0xC0, 0x00, 0xC0, 0x30, 0xFC, 0x00, 0x3F, 0x00, 0x00, 0x07, 0x00, 0x00, 0x3F}, /* 'M' 45 */
	{0x00, 0xFC, 0x18, 0x60, 0x80, 0x00, 0x00, 0xFC, 0x00, 0x3F, 0x00, 0x00, 0x01, 0x06, 0x18, 0x3F}, /* 'N' 46 */
	{0x00, 0xF0, 0x08, 0x04, 0x04, 0x04, 0x08, 0xF0, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0F}, /* 'O' 47 */
	{0x00, 0xFC, 0x04, 0x04, 0x04, 0x04, 0x88, 0x70, 0x00, 0x3F, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00}, /* 'P' 48 */
	{0x00, 0xF0, 0x08, 0x04, 0x04, 0x04, 0x08, 0xF0, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x28, 0x10, 0x2F}, /* 'Q' 49 */
	{0x00, 0xFC, 0x04, 0x04, 0x04, 0x04, 0x88, 0x70, 0x00, 0x3F, 0x01, 0x01, 0x01, 0x01, 0x02, 0x3C}, /* 'R' 50 */
	{0x00, 0x38, 0x44, 0x84, 0x84, 0x04, 0x04, 0x18, 0x00, 0x18, 0x20, 0x20, 0x20, 0x21, 0x22, 0x1C}, /* 'S' 51 */
	{0x00, 0x04, 0x04, 0x04, 0xFC, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* 'T' 52 */
	{0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x20, 0x1F}, /* 'U' 53 */
	{0x00, 0x1C, 0xE0, 0x00, 0x00, 0x00, 0xE0, 0x1C, 0x00, 0x00, 0x00, 0x07, 0x38, 0x07, 0x00, 0x00}, /* 'V' 54 */
	{0x00, 0xFC, 0x00, 0x80, 0x7C, 0x80, 0x00, 0xFC, 0x00, 0x03, 0x3C, 0x03, 0x00, 0x03, 0x3C, 0x03}, /* 'W' 55 */
	{0x00, 0x0C, 0x30, 0x40, 0x80, 0x40, 0x30, 0x0C, 0x00, 0x30, 0x0C, 0x03, 0x00, 0x03, 0x0C, 0x30}, /* 'X' 56 */
	{0x00, 0x0C, 0x30, 0xC0, 0x00, 0xC0, 0x30, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* 'Y' 57 */
	{0x00, 0x04, 0x04, 0x04, 0xC4, 0x34, 0x0C, 0x00, 0x00, 0x30, 0x2C, 0x23, 0x20, 0x20, 0x20, 0x00}, /* 'Z' 58 */
	{0x00, 0x00, 0x00, 0xFE, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x40, 0x40, 0x00}, /* '[' 59 */
	{0x00, 0x00, 0x40, 0x40, 0x20, 0x20, 0x10, 0x10, 0x08, 0x08, 0x04, 0x04, 0x02, 0x02, 0x00, 0x00}, /* '\' 60 */
	{0x00, 0x02, 0x02, 0x02, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x7F, 0x00, 0x00, 0x00}, /* ']' 61 */
	{0x00, 0x00, 0x08, 0x04, 0x02, 0x04, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '^' 62 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40}, /* '_' 63 */
	{0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '`' 64 */
	{0x00, 0x80, 0x40, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x1C, 0x22, 0x22, 0x22, 0x22, 0x1F, 0x20}, /* 'a' 65 */
	{0x00, 0xFC, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x3F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0F}, /* 'b' 66 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x40, 0x80, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x20, 0x10}, /* 'c' 67 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x80, 0xFC, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x3F}, /* 'd' 68 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x0F, 0x12, 0x22, 0x22, 0x22, 0x22, 0x13}, /* 'e' 69 */
	{0x00, 0x40, 0x40, 0xF8, 0x44, 0x44, 0x44, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00}, /* 'f' 70 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x80, 0xC0, 0x00, 0x00, 0x27, 0x48, 0x50, 0x50, 0x48, 0x3F, 0x00}, /* 'g' 71 */
	{0x00, 0xFC, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00}, /* 'h' 72 */
	{0x00, 0x00, 0x00, 0x00, 0xCC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* 'i' 73 */
	{0x00, 0x00, 0x00, 0x00, 0xCC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x3F, 0x00, 0x00, 0x00}, /* 'j' 74 */
	{0x00, 0xFC, 0x00, 0x00, 0x80, 0x40, 0x20, 0x00, 0x00, 0x3F, 0x02, 0x05, 0x08, 0x10, 0x20, 0x00}, /* 'k' 75 */
	{0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00}, /* 'l' 76 */
	{0x00, 0xC0, 0x40, 0x40, 0x80, 0x40, 0x40, 0x80, 0x00, 0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x3F}, /* 'm' 77 */
	{0x00, 0xC0, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00}, /* 'n' 78 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0F}, /* 'o' 79 */
	{0x00, 0xC0, 0x80, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x7F, 0x08, 0x10, 0x10, 0x10, 0x08, 0x07}, /* 'p' 80 */
	{0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x80, 0xC0, 0x00, 0x07, 0x08, 0x10, 0x10, 0x10, 0x08, 0x7F}, /* 'q' 81 */
	{0x00, 0x00, 0xC0, 0x80, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00}, /* 'r' 82 */
	{0x00, 0x80, 0x40, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0x11, 0x22, 0x22, 0x24, 0x24, 0x18, 0x00}, /* 's' 83 */
	{0x00, 0x40, 0x40, 0xFC, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x00}, /* 't' 84 */
	{0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x3F, 0x00}, /* 'u' 85 */
	{0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x00, 0x03, 0x0C, 0x30, 0x0C, 0x03, 0x00}, /* 'v' 86 */
	{0x00, 0xC0, 0x00, 0x00, 0x80, 0x00, 0x00, 0xC0, 0x00, 0x07, 0x38, 0x0C, 0x03, 0x0C, 0x38, 0x07}, /* 'w' 87 */
	{0x00, 0x40, 0x80, 0x00, 0x00, 0x00, 0x80, 0x40, 0x00, 0x20, 0x10, 0x09, 0x06, 0x09, 0x10, 0x20}, /* 'x' 88 */
	{0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x40, 0x43, 0x4C, 0x30, 0x0C, 0x03, 0x00}, /* 'y' 89 */
	{0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0xC0, 0x00, 0x00, 0x30, 0x28, 0x24, 0x22, 0x21, 0x20, 0x00}, /* 'z' 90 */
	{0x00, 0x00, 0x80, 0x80, 0x7C, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x40, 0x40, 0x00}, /* '{' 91 */
	{0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00}, /* '|' 92 */
	{0x00, 0x02, 0x02, 0x7C, 0x80, 0x80, 0x00, 0x00, 0x00, 0x40, 0x40, 0x3F, 0x00, 0x00, 0x00, 0x00}, /* '}' 93 */
	{0x00, 0x80, 0x40, 0x40, 0x80, 0x80, 0x80, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '~' 94 */
};

static const uint8_t ascii_12x24[][36] = {
	{0x00, 0x80, 0xE0, 0xF0, 0x38, 0x18, 0x18, 0x18, 0x38, 0xF0, 0xE0, 0x80, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x01, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x01}, /* '0' 0 */
	{0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0x1F, 0x1F, 0x18, 0x18, 0x18, 0x00}, /* '1' 1 */
	{0x00, 0xE0, 0xF0, 0x38, 0x18, 0x18, 0x18, 0x18, 0x38, 0xF0, 0xE0, 0x00, 0x00, 0x01, 0x81, 0xC0, 0xE0, 0x70, 0x38, 0x1C, 0x0F, 0x07, 0x01, 0x00, 0x00, 0x1E, 0x1F, 0x07, 0x06, 0x0E, 0x1C, 0x18, 0x18, 0x1F, 0x1F, 0x00}, /* '2' 2 */
	{0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18, 0x18, 0xD8, 0xF8, 0x78, 0x18, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x0E, 0x0F, 0x1B, 0x39, 0xF0, 0xE0, 0x00, 0x00, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x00}, /* '3' 3 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0x38, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0xBC, 0x8F, 0x83, 0x80, 0x80, 0xFF, 0xFF, 0x80, 0x80, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x19, 0x19, 0x1F, 0x1F, 0x19, 0x19}, /* '4' 4 */
	{0x00, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18, 0x18, 0x18, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x1F, 0x1F, 0x0C, 0x0C, 0x0C, 0x0C, 0x1C, 0xF8, 0xF0, 0x00, 0x00, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x00}, /* '5' 5 */
	{0x00, 0xE0, 0xF0, 0x38, 0x18, 0x18, 0x18, 0x18, 0x38, 0xF0, 0xE0, 0x00, 0x00, 0xFF, 0xFF, 0x18, 0x0C, 0x0C, 0x0C, 0x0C, 0x1C, 0xF8, 0xF0, 0x00, 0x00, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x00}, /* '6' 6 */
	{0x00, 0xF8, 0xF8, 0x30, 0x30, 0x30, 0x70, 0x60, 0xE0, 0xF8, 0x38, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0xF0, 0xFE, 0x0F, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '7' 7 */
	{0x00, 0xE0, 0xF0, 0x38, 0x18, 0x18, 0x18, 0x18, 0x38, 0xF0, 0xE0, 0x00, 0x00, 0xE3, 0xF7, 0x1E, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0xF7, 0xE3, 0x00, 0x00, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x00}, /* '8' 8 */
	{0x00, 0xE0, 0xF0, 0x38, 0x18, 0x18, 0x18, 0x18, 0x38, 0xF0, 0xE0, 0x00, 0x00, 0x0F, 0x1F, 0x38, 0x30, 0x30, 0x30, 0x30, 0x18, 0xFF, 0xFF, 0x00, 0x00, 0x07, 0x0F, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x1C, 0x0F, 0x07, 0x00}, /* '9' 9 */

	{0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x81, 0x81, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00}, /* ':' 10 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* ' ' 11 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* '_' 12 */
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x3C, 0x18, 0x00, 0x00, 0x00, 0x00}, /* '.' 13 */
};

